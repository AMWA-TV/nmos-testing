{
    "title": "Controller Testing - Question",
    "description": "Contains all details necessary for NMOS Controller Testing",
    "$schema": "http://json-schema.org/draft-04/schema",
    "required": [
        "test_type",
        "question_id",
        "name",
        "description",
        "question",
        "answers",
        "time_sent",
        "timeout",
        "url_for_response",
        "answer_response",
        "time_answered",
        "metadata"
    ],
    "properties": {
        "test_type": {
            "description": "String indicating the type of question being sent.",
            "anyOf": [
                {
                    "single_choice": {
                        "type": "string",
                        "description": "A single answer_id is expected and should be used to return a string"
                    },
                    "multi_choice": {
                        "type": "string",
                        "description": "Multiple answer_id's are expected and should be used to return a list of strings"
                    },
                    "action": {
                        "type": "null",
                        "description": "Instructions to be carried out by the user, no answer to return"
                    }
                }

            ]
        },
        "question_id": {
            "type": "string",
            "description": "A unique string for each individual question sent. Where a test contains multiple questions they will share a name attribute but have a unique id."
        },
        "name": {
            "type": "string",
            "description": "The test name, indicating the test that sent the question."
        },
        "description": {
            "type": "string",
            "description": "A brief description of the test"
        },
        "question": {
            "type": "string",
            "description": "Human readable question text containing instructions to carry out the test"
        },
        "answers": {
            "type": "array",
            "description": "Array containing answer objects to be used to select the correct answer_id to be returned.",
            "examples": [
                [
                    {
                        "answer_id": "answer_2",
                        "label": "s3/wright",
                        "description": "Mock sender 3",
                        "id": "71ce775c-cdc5-479a-bd29-87c081905ecf",
                        "answer_str": "s3/wright (Mock sender 3, 71ce775c-cdc5-479a-bd29-87c081905ecf)"
                    }
                ]
            ],
            "items": {
                "description": "Individual answer details, the label, description and id of the relevant resource and an associated answer_id",
                "type": "array",
                "required": [
                    "answer_id",
                    "label",
                    "description",
                    "id",
                    "answer_str"
                ],
                "properties": {
                    "answer_id": {
                        "type": "string",
                        "description": "String, unique to each answer within a question. This is the value to be returned for validation."
                    },
                    "label": {
                        "type": "string",
                        "description": "Resource label as might be displayed on the NCuT"
                    },
                    "description": {
                        "type": "string",
                        "description": "Resource description as might be displayed on the NCuT"
                    },
                    "id": {
                        "type": "string",
                        "description": "Resource ID as might be displayed on the NCuT"
                    },
                    "answer_str": {
                        "type": "string",
                        "description": "String combining all the resource details for display on the testing facade"
                    }
                }
            }
        },
        "time_sent": {
            "type": "string",
            "description": "Time the question was sent"
        },
        "timeout": {
            "type": "string",
            "description": "Time in seconds the test suite will wait to receive an answer to a particular question",
            "default": 600
        },
        "url_for_response": {
            "type": "string",
            "description": "URL of the test suite API endpoint to send the POST request with answers"
        },
        "answer_response": {
            "description": "Null when received. Should be filled with answer_ids according to question type when POSTed back to url_for_response",
            "default": "",
            "anyOf": [
                {
                    "type": "null",
                    "description": "Null entry when sent from test suite"
                },
                {
                    "type": "string",
                    "description": "A single answer string, for 'single_choice' type questions",
                    "examples": [
                        "answer_1"
                    ]
                },
                {
                    "type": "string",
                    "description": "Multiple answer strings, for 'multi_choice' type questions",
                    "examples": [
                        ["answer_1", "answer_5"]
                    ]
                }
            ]
        },
        "time_answered": {
            "type": "string",
            "description": "Null when received. Should be filled with float string of time answered when returned",
            "default": ""
        },
        "metadata": {
            "type": "array",
            "description": "Details of Sender and Receiver where specified in the question text for IS-05 tests",
            "properties": {
                "sender": {
                    "type": "array",
                    "description": "Details of sender chosen to be part of IS-05 connection management test",
                    "required": [
                        "id",
                        "label",
                        "description"
                    ],
                    "properties": {
                        "id": {
                            "type": "string",
                            "description": "ID of sender as might be shown on NCut"
                        },
                        "label": {
                            "type": "string",
                            "description": "Label of sender as might be shown on NCuT"
                        },
                        "description": {
                            "type": "string",
                            "description": "Description of sender as might be shown on NCuT"
                        }
                    }
                },
                "receiver": {
                    "type": "array",
                    "description": "Details of receiver chosen to be part of IS-05 connection maagement test",
                    "required": [
                        "id",
                        "label",
                        "description"
                    ],
                    "properties": {
                        "id": {
                            "type": "string",
                            "description": "ID of receiver as might be shown on NCuT"
                        },
                        "label": {
                            "type": "string",
                            "description": "Label of receiver as might be shown on NCuT"
                        },
                        "description": {
                            "type": "string",
                            "description": "Description of receiver as might be shown on NCuT"
                        }
                    }
                }
            }
        }
    }
}
