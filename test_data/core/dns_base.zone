$ORIGIN {{ domain }}.
$TTL 60s

{{ domain }}.  IN  SOA   ns.{{ domain }}. postmaster.{{ domain }}. ( 2007120710 1d 2h 4w 1h )
{{ domain }}.  IN  A     {{ ip_address }}

; These lines indicate to clients that this server supports DNS Service Discovery
b._dns-sd._udp	IN	PTR	{{ domain }}.
lb._dns-sd._udp	IN	PTR	{{ domain }}.

; These lines indicate to clients which service types this server may advertise
_services._dns-sd._udp	PTR	_nmos-registration._tcp
_services._dns-sd._udp	PTR	_nmos-register._tcp
_services._dns-sd._udp	PTR	_nmos-query._tcp
_services._dns-sd._udp	PTR	_nmos-system._tcp
_services._dns-sd._udp	PTR	_nmos-mqtt._tcp

{% if mqtt_enabled %}
; These lines allow clients to find a remote MQTT Broker
{{ mqtt_host }}.{{ domain }}. IN  A     {{ mqtt_ip }}
_nmos-mqtt._tcp	PTR	mqttrelay._nmos-mqtt._tcp
mqttrelay._nmos-mqtt._tcp	SRV	0 0 {{ mqtt_port }} {{ mqtt_host }}.{{ domain }}.
mqttrelay._nmos-mqtt._tcp	TXT	"api_proto={{ mqtt_proto }}" "api_auth={{ mqtt_auth }}"
{% endif %}
