# BCP-003-01 Certificate Authority

In order to ease testing with TLS, the test suite includes a certificate authority which has been created for this sole
purpose. Typically storing private keys in a code repository would be bad practice, but in this case as the CA will not
be used in production this is not a requirement.

This CA was generated with the assistance of <https://jamielinux.com/docs/openssl-certificate-authority>

## Chain of Trust

In order to trust certificates generated by this CA, any device under test will need to load the CA's certificate chain
into their trust store. The mechanism to do this varies by operating system.

**IMPORTANT:** Do not leave this chain of trust installed in devices once testing has been completed. Otherwise they
will continue to trust any certificates generated by the CA within this repository indefinitely.

The trusted certificate chain is held in the following file:
*   ca/intermediate/certs/ca-chain.cert.pem

## Installing Certificates

In order for requests made to the device under test to be trusted by the test suite, the following private key and
certificate must be loaded into the device. This will provide the device with the hostname 'testapi.nmos.tv'

**IMPORTANT:** Do not leave this private key and certificate installed on a device once testing is complete.

Device under test uses:
*   intermediate/private/rsa.api.testsuite.nmos.tv.key.pem
*   intermediate/private/ecdsa.api.testsuite.nmos.tv.key.pem
*   intermediate/certs/rsa.api.testsuite.nmos.tv.cert.pem
*   intermediate/certs/ecdsa.api.testsuite.nmos.tv.cert.pem

## Additional Certificates

Additional certificates can be generated using this CA if required, following the instructions at the link above. The
passphase for the private keys in this repository is 'nmostesting'.

## Other Notes

CA and intermediate are valid for 50 years
CA/Intermediate CN: ca.testsuite.nmos.tv

Any web servers activated by the test suite itself should use the following private key and certificate:
*   intermediate/private/rsa.mocks.testsuite.nmos.tv.key.pem
*   intermediate/private/ecdsa.mocks.testsuite.nmos.tv.pem
*   intermediate/certs/rsa.mocks.testsuite.nmos.tv.cert.key.pem
*   intermediate/certs/ecdsa.mocks.testsuite.nmos.tv.cert.pem
